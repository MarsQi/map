{"version":3,"sources":["webpack:///src/components/scroll/index.vue","webpack:///./src/components/scroll/index.vue?4f76","webpack:///./src/components/scroll/index.vue"],"names":["Number","Boolean","Function","undefined","pageY","pageX","startScroll","preventDefault","offset","refresh","endY","startX","clientHeight","scrollTop","infinite","_this","this","refreshDone","selectortype_template_index_0_src_components_scroll","render","_vm","_h","$createElement","_c","_self","staticClass","class","down","state","up","touch","touching","on","touchstart","$event","touchStart","touchmove","touchMove","touchend","touchEnd","style","transform","top","_t","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","components_scroll","ssrContext","__webpack_exports__"],"mappings":"uJAuBAA,yCAIAC,iBAEA,uBAEAA,iBAEA,sBAEA,YAEA,mBAEAC,sBACAC,YAEA,oBAEAD,sBACAC,WAGA,+BAGA,QACA,SACA,SACA,YACA,mBACA,+EAMAC,qCACAC,2CACA,uJAOAC,mBACAC,qEACA,qDAKA,aAEA,mEAOA,iBAIA,kBAFA,qBACAC,mCAIAC,sBAEA,WACA,6BAGAJ,4BACAD,oBACAM,WACAC,mDAGA,6EAOAC,gDACAA,wBACAC,+EACA,6BAEAL,wDAEA,OACAM,kCAMA,IAAAC,EAAAC,gBACA,gBACAR,2CAEAS,cACA,wCAGA,WACA,6CAGA,0BAGA,oDAGA,KC9IAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAJ,KAAaK,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAAC,OAA+BC,KAAA,IAAAP,EAAAQ,MAAAC,GAAA,GAAAT,EAAAQ,MAAAnB,QAAA,IAAAW,EAAAQ,MAAAE,MAAAV,EAAAW,UAAsFC,IAAKC,WAAA,SAAAC,GAA8Bd,EAAAe,WAAAD,IAAuBE,UAAA,SAAAF,GAA8Bd,EAAAiB,UAAAH,IAAsBI,SAAA,SAAAJ,GAA6Bd,EAAAmB,SAAAL,OAAuBX,EAAA,WAAgBE,YAAA,QAAAe,OAA4BC,UAAA,kBAAArB,EAAAsB,IAAA,YAAsDnB,EAAA,UAAeE,YAAA,iBAA2BL,EAAAuB,GAAA,gBAAApB,EAAA,QAAoCE,YAAA,aAAuBL,EAAAwB,GAAA,UAAAxB,EAAAwB,GAAA,KAAArB,EAAA,QAA0CE,YAAA,WAAqBL,EAAAwB,GAAA,YAAAxB,EAAAwB,GAAA,KAAArB,EAAA,QAA4CE,YAAA,gBAA0BL,EAAAwB,GAAA,iBAAAxB,EAAAwB,GAAA,KAAAxB,EAAAuB,GAAA,kBAE5rBE,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACA/B,GATA,EAVA,SAAAgC,GACAH,EAAA,SAaA,KAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/0.1aa5d7e9237a0bbb7104.js","sourcesContent":["<template lang=\"html\">\r\n\t<div class=\"yo-scroll\" :class=\"{'down':(state===0),'up':(state==1),refresh:(state===2),touch:touching}\" @touchstart=\"touchStart($event)\" @touchmove=\"touchMove($event)\" @touchend=\"touchEnd($event)\">\r\n\t\t<section class=\"inner\" :style=\"{ transform: 'translate3d(0, ' + top + 'px, 0)' }\">\r\n\t\t\t<header class=\"pull-refresh\">\r\n\t\t\t\t<slot name=\"pull-refresh\">\r\n\t\t\t\t\t<span class=\"down-tip\">下拉更新</span>\r\n\t\t\t\t\t<span class=\"up-tip\">松开刷新数据</span>\r\n\t\t\t\t\t<span class=\"refresh-tip\">加载中……</span>\r\n\t\t\t\t</slot>\r\n\t\t\t</header>\r\n\t\t\t<slot>\r\n\t\t\t</slot>\r\n\t\t</section>\r\n\t</div>\r\n</template>\r\n<style lang=\"less\">\r\n\t@import url(\"./less/index.less\");\r\n</style>\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\toffset: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 100 //默认高度\r\n\t\t\t},\r\n\t\t\tenableInfinite: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tenableRefresh: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tdataList: {\r\n\t\t\t\tdefault: false,\r\n\t\t\t\trequired: false\r\n\t\t\t},\r\n\t\t\tonRefresh: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: undefined,\r\n\t\t\t\trequired: false\r\n\t\t\t},\r\n\t\t\tonInfinite: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: undefined,\r\n\t\t\t\trequire: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tstate: 0,\r\n\t\t\t\tstartX: 0,\r\n\t\t\t\tstartY: 0,\r\n\t\t\t\ttouching: false,\r\n\t\t\t\tinfiniteLoading: false,\r\n\t\t\t\tdownFlag: false, //用来显示是否加载中\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttouchStart(e) {\r\n\t\t\t\tthis.startY = e.targetTouches[0].pageY;\r\n\t\t\t\tthis.startX = e.targetTouches[0].pageX;\r\n\t\t\t\tthis.startScroll = this.$el.scrollTop || 0;\r\n\t\t\t\tthis.touching = true; //留着有用，不能删除\r\n\t\t\t},\r\n\t\t\ttouchMove(e) {\r\n\t\t\t\tif(!this.enableRefresh || this.dataList.noFlag || !this.touching) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet diff = e.targetTouches[0].pageY - this.startY - this.startScroll\r\n\t\t\t\tif(diff > 0) e.preventDefault()\r\n\t\t\t\tthis.top = Math.pow(diff, 0.8) + (this.state === 2 ? this.offset : 0)\r\n\t\t\t\tif(this.state === 2) { // in refreshing\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.top >= this.offset) {\r\n\t\t\t\t\tthis.state = 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state = 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t\tif(!this.enableRefresh) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.touching = false\r\n\t\t\t\tif(this.state === 2) { // in refreshing\r\n\t\t\t\t\tthis.state = 2\r\n\t\t\t\t\tthis.top = this.offset\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.top >= this.offset) { // do refresh\r\n\t\t\t\t\tthis.refresh()\r\n\t\t\t\t} else { // cancel refresh\r\n\t\t\t\t\tthis.state = 0\r\n\t\t\t\t\tthis.top = 0\r\n\t\t\t\t}\r\n\t\t\t\t//用于判断滑动是否在原地 ----begin\r\n\t\t\t\tlet endX = e.changedTouches[0].pageX,\r\n\t\t\t\t\tendY = e.changedTouches[0].pageY,\r\n\t\t\t\t\tdy = this.startY - endY,\r\n\t\t\t\t\tdx = endX - this.startX;\r\n\t\t\t\t//如果滑动距离太短  \r\n\t\t\t\tif(Math.abs(dx) < 2 && Math.abs(dy) < 2) {\r\n\t\t\t\t\tconsole.log(\"滑动距离太短\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//--------end--------\r\n\t\t\t\tif(!this.enableInfinite || this.infiniteLoading) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet outerHeight = this.$el.clientHeight,\r\n\t\t\t\t\tinnerHeight = this.$el.querySelector('.inner').clientHeight,\r\n\t\t\t\t\tscrollTop = this.$el.scrollTop,\r\n\t\t\t\t\tptrHeight = this.onRefresh ? this.$el.querySelector('.pull-refresh').clientHeight : 0,\r\n\t\t\t\t\tbottom = innerHeight - outerHeight - scrollTop - ptrHeight;\r\n\t\t\t\tconsole.log(bottom + \" __ \" + this.offset)\r\n\t\t\t\tif(bottom <= this.offset && this.state === 0) {\r\n\t\t\t\t\tthis.downFlag = false;\r\n\t\t\t\t\tthis.infinite();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.$el.querySelector('.load-more').style.display = 'none';\r\n\t\t\t\t\t// this.downFlag = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trefresh() {\r\n\t\t\t\tthis.state = 2;\r\n\t\t\t\tthis.top = this.offset;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.onRefresh(this.refreshDone)\r\n\t\t\t\t}, 300);\r\n\t\t\t},\r\n\t\t\trefreshDone() {\r\n\t\t\t\tthis.state = 0\r\n\t\t\t\tthis.top = 0\r\n\t\t\t},\r\n\t\t\tinfinite() {\r\n\t\t\t\tthis.infiniteLoading = true\r\n\t\t\t\tsetTimeout(() => {\r\n//\t\t\t\t\tthis.onInfinite(this.infiniteDone);\r\n\t\t\t\t}, 2000);\r\n\t\t\t},\r\n\t\t\tinfiniteDone() {\r\n\t\t\t\tthis.infiniteLoading = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/scroll/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"yo-scroll\",class:{'down':(_vm.state===0),'up':(_vm.state==1),refresh:(_vm.state===2),touch:_vm.touching},on:{\"touchstart\":function($event){_vm.touchStart($event)},\"touchmove\":function($event){_vm.touchMove($event)},\"touchend\":function($event){_vm.touchEnd($event)}}},[_c('section',{staticClass:\"inner\",style:({ transform: 'translate3d(0, ' + _vm.top + 'px, 0)' })},[_c('header',{staticClass:\"pull-refresh\"},[_vm._t(\"pull-refresh\",[_c('span',{staticClass:\"down-tip\"},[_vm._v(\"下拉更新\")]),_vm._v(\" \"),_c('span',{staticClass:\"up-tip\"},[_vm._v(\"松开刷新数据\")]),_vm._v(\" \"),_c('span',{staticClass:\"refresh-tip\"},[_vm._v(\"加载中……\")])])],2),_vm._v(\" \"),_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-d5da48e2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/scroll/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d5da48e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d5da48e2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/scroll/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}